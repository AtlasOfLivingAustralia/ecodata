var imageCarousel='<img style="height:300px" src="https://dl.dropboxusercontent.com/s/8nct1vmhq86gpf3/plate.png?dl=0" alt="Plate"><img style="height:300px" src="https://dl.dropboxusercontent.com/s/ksws7ssui4ymrx7/boulder_layout.png" alt="Boulder"><img style="height:300px" src="https://dl.dropboxusercontent.com/s/oyjjsgclz2dw6lw/branching.png?dl=0" alt="Branching"><img style="height:300px" src="https://dl.dropboxusercontent.com/s/hpnxz781h71g164/soft.png?dl=0" alt="Boulder">';$(".form-actions").before(imageCarousel);var observationCounter=0,Output_CoralWatch_coralObservationsRow=function(e,t,o,a){var r=this;ecodata.forms.NestedModel.apply(r,[e,t,o,a]),o=_.extend(o,{parent:r}),r.sampleId=ko.observable().extend({numericString:2}),r.colourCodeLightest=ko.observable().extend({metadata:{metadata:r.dataModel.colourCodeLightest,context:r.$context,config:a}}),r.colourCodeDarkest=ko.observable().extend({metadata:{metadata:r.dataModel.colourCodeDarkest,context:r.$context,config:a}}),r.colourCodeAverage=ko.observable().extend({numericString:2}),r.typeOfCoral=ko.observable().extend({metadata:{metadata:r.dataModel.typeOfCoral,context:r.$context,config:a}});var s=_.extend(a,{printable:"",dataFieldName:"coralSpecies",output:"CoralWatch",surveyName:""});r.coralSpecies=new SpeciesViewModel({},s),r.speciesPhoto=ko.observableArray([]),r.speciesPhoto=ko.observableArray([]),r.loadspeciesPhoto=function(e){void 0!==e&&$.each(e,function(e,t){r.speciesPhoto.push(new ImageViewModel(t,!1,o))})},r.loadData=function(e){r.sampleId(ecodata.forms.orDefault(e.sampleId,++observationCounter)),r.colourCodeLightest(ecodata.forms.orDefault(e.colourCodeLightest,void 0)),r.colourCodeDarkest(ecodata.forms.orDefault(e.colourCodeDarkest,void 0)),r.colourCodeAverage(ecodata.forms.orDefault(e.colourCodeAverage,0)),r.typeOfCoral(ecodata.forms.orDefault(e.typeOfCoral,void 0)),r.coralSpecies.loadData(ecodata.forms.orDefault(e.coralSpecies,{})),r.loadspeciesPhoto(ecodata.forms.orDefault(e.speciesPhoto,[]))},r.loadData(e||{}),r.colourCodeLightest.subscribe(function(e){var t=r.colourCodeLightest();if(t){var o=["B1","B2","B3","B4","B5","B6","C1","C2","C3","C4","C5","C6","D1","D2","D3","D4","D5","D6","E1","E2","E3","E4","E5","E6"],a=(o.indexOf(t),[]);$.each(o,function(e,o){var r=t.charAt(1);parseInt(o.charAt(1))>=r&&a.push({text:o,value:o})}),bootbox.prompt({title:"<h1>Select Dark colour code value<h1>",inputType:"select",inputOptions:a,buttons:{confirm:{label:"OK",className:"btn-success"},cancel:{label:"Clear",className:"btn-danger"}},callback:function(e){if(r.colourCodeDarkest(e),r.colourCodeDarkest()&&r.colourCodeLightest()){var t=parseInt(r.colourCodeDarkest().charAt(1))+parseInt(r.colourCodeLightest().charAt(1));t>0&&r.colourCodeAverage((t/2).toFixed(2))}}})}}),r.typeOfCoral.subscribe(function(e){if(e){var t="";switch(e){case"Plate corals":t="https://dl.dropboxusercontent.com/s/8nct1vmhq86gpf3/plate.png?dl=0";break;case"Boulder corals":t="https://dl.dropboxusercontent.com/s/ksws7ssui4ymrx7/boulder_layout.png";break;case"Branching corals":t="https://dl.dropboxusercontent.com/s/oyjjsgclz2dw6lw/branching.png?dl=0";break;case"Soft corals":t="https://dl.dropboxusercontent.com/s/hpnxz781h71g164/soft.png?dl=0";break;default:t=""}t&&"<img src='"+t+"'></img>"}})},context=_.extend({},context,{parent:self,listName:"coralObservations"});self.data.coralObservations=ko.observableArray().extend({list:{metadata:self.dataModel,constructorFunction:Output_CoralWatch_coralObservationsRow,context:context,userAddedRows:!0,config:config}}),self.data.coralObservations.loadDefaults=function(){self.data.coralObservations.addRow()},self.data.depthInMetres.subscribe(function(e){var t=3.28084*parseFloat(self.data.depthInMetres());t=t.toFixed(2),self.data.depthInFeet(t)}),self.data.waterTemperatureInDegreesCelcius.subscribe(function(e){var t=parseFloat(1.8*parseFloat(self.data.waterTemperatureInDegreesCelcius()).toFixed(2)+32);t=t.toFixed(2),self.data.waterTemperatureInDegreesFarenheit(t)}),self.transients.convert=ko.computed(function(){if("0"==self.data.waterTemperatureInDegreesFarenheit()&&"0"==self.data.waterTemperatureInDegreesCelcius());else{var e=(parseFloat(self.data.waterTemperatureInDegreesFarenheit()).toFixed(2)-32)*(5/19);e=e.toFixed(2),self.data.waterTemperatureInDegreesCelcius(e)}var t=parseFloat(self.data.depthInFeet()).toFixed(2)/3.28084;t=t.toFixed(2),self.data.depthInMetres(t)},this);