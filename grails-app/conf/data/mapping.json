{
  "mappings":{
      "properties": {
        "siteId" : {
          "type" : "keyword"
        },
        "projectId" : {
          "type" : "keyword"
        },
        "projects" : {
          "type" : "keyword"
        },
        "programId" : {
          "type" : "keyword"
        },
        "managementUnitId" : {
          "type" : "keyword"
        },
        "grantId": {
          "type": "keyword"
        },
        "origin" : {
          "type" : "keyword"
        },
        "countries" : {
          "type" : "keyword"
        },
        "uNRegions" : {
          "type" : "keyword"
        },
        "scienceType" : {
          "type" : "keyword"
        },
        "ecoScienceType" : {
          "type" : "keyword"
        },
        "typeOfProject" : {
          "type" : "keyword"
        },
        "tags" : {
          "type" : "keyword"
        },
        "fundingSourceFacet": {
          "type": "keyword"
        },
        "fundings": {
          "properties": {
            "fundingSource": {
              "type": "keyword",
              "copy_to":"fundingSourceFacet"
            }
          }
        },

        "status": {
          "type" : "keyword"
        },
        "organisationName": {
          "type" : "text",
          "copy_to": ["organisationFacet", "organisationSort"]
        },
        "organisationFacet": {
          "type": "keyword"
        },
        "organisationSort": {
          "type": "keyword",
          "normalizer" : "case_insensitive_sort"
        },
        "dateCreated": {
          "type" : "date",
          "copy_to" : "dateCreatedSort"
        },
        "dateCreatedSort" : {
          "type" : "keyword", "normalizer" : "case_insensitive_sort"
        },
        "serviceProviderName": {
          "type" : "text",
          "copy_to": ["organisationName","organisationFacet", "organisationSort"]
        },
        "associatedOrgs": {
          "properties" : {
            "name" : {
              "type" : "text",
              "copy_to": ["organisationName", "organisationFacet", "organisationSort"]
            },
            "logo": {
              "index": false,
              "type": "text"
            }
          }
        },
        "typeFacet" : {"type" : "keyword"},
        "type": {
          "type" : "text",
          "copy_to" : "typeFacet"
        },
        "className": {
          "type":"text",
          "analyzer":"facetKeyword"
        },
        "associatedProgram": {
          "type" : "text",
          "copy_to": "associatedProgramFacet"
        },
        "associatedProgramFacet": {
          "type": "keyword"
        },

        "managementUnitName": {
          "type" : "text",
          "copy_to" : "muFacet"
        },
        "muFacet": {
          "type": "keyword"
        },
        "primaryOutcomeFacet": {"type": "keyword"},
        "primaryOutcome": {
          "type": "text",
          "copy_to": "primaryOutcomeFacet"
        },
        "secondaryOutcomesFacet": {"type": "keyword"},
        "secondaryOutcomes": {
          "type": "text",
          "copy_to": "secondaryOutcomesFacet"
        },
        "associatedSubProgram": {
          "type" : "text",
          "copy_to" : "associatedSubProgramFacet"
        },
        "associatedSubProgramFacet" : {
          "type" : "keyword"
        },
        "industries":{
          "type":"text",
          "copy_to":"industryFacet"
        },
        "industryFacet":{
          "type":"keyword"
        },
        "bushfireCategories":{
          "type":"text",
          "copy_to":"bushfireCategoriesFacet"
        },
        "bushfireCategoriesFacet":{
          "type":"keyword"
        },
        "name": {
          "type" : "text",
          "copy_to": "nameSort"
        },
        "nameSort": {
          "type" : "keyword", "normalizer" : "lowercase"
        },
        "extent":{
          "properties": {
            "geometry": {
              "properties": {


              }
            }
          }
        },
        "sites":{
          "properties":{
            "extent":{
              "properties": {
                "geometry": {
                  "properties": {

                  }
                }
              }
            },
            "geoIndex": {
              "type": "geo_shape",
              "ignore_malformed": true
            },
            "geoPoint": {
              "type": "geo_point",
              "ignore_malformed": true
            },
            "geometryType": {
              "type": "keyword"
            },
            "name": {
              "type" : "text",
              "copy_to" : "siteNameFacet"
            }
          }
        },
        "siteNameFacet" : {"type" : "keyword"},
        "projectArea":{
          "properties":{
            "geoIndex": {
              "type": "geo_shape",
              "ignore_malformed": true
            },
            "geoPoint": {
              "type": "geo_point",
              "ignore_malformed": true
            },
            "geometryType": {
              "type": "keyword"
            }
          }
        },
        "isBushfire":{
          "type":"boolean"
        },
        "difficulty":{
          "type":"keyword"
        },
        "fundingSourceFacet":{
          "type":"keyword"
        },
        "reportingThemesFacet":{
          "type":"keyword"
        },
        "assessment":{
          "type":"keyword"
        },
        "isExternal":{
          "type":"boolean"
        },
        "externalId": {
          "type":"keyword"
        },
        "promoteOnHomepage": {
          "type": "keyword"
        },
        "projectActivityNameFacet": {
          "type": "keyword"
        },
        "organisationNameFacet": {
          "type":"keyword"
        },
        "projectNameFacet":{"type":"keyword"},
        "activityOwnerNameFacet":{"type":"keyword"},
        "activityLastUpdatedYearFacet":{"type":"keyword"},
        "activityLastUpdatedMonthFacet":{"type":"keyword"},
        "recordNameFacet":{"type":"keyword"},
        "surveyImage": {
          "type": "boolean"
        },
        "embargoed": {
          "type": "boolean"
        },
        "methodType":{
          "type":"keyword"
        },
        "spatialAccuracy":{
          "type":"keyword"
        },
        "speciesIdentification":{
          "type":"keyword"
        },
        "temporalAccuracy":{
          "type":"keyword"
        },
        "nonTaxonomicAccuracy":{
          "type":"keyword"
        },
        "dataQualityAssuranceMethods":{
          "type":"keyword"
        },
        "isDataManagementPolicyDocumented":{
          "type":"boolean"
        },
        "projectActivity":{
          "properties":{
            "embargoUntil":{
              "type":"text"
            },
            "name":{
              "index": false,
              "type":"text",
              "copy_to": "projectActivityNameFacet"
            },
            "organisationName":{
              "index": false,
              "type":"text",
              "copy_to": "organisationNameFacet"
            },
            "projectName":{
              "type":"text",
              "copy_to": "projectNameFacet"
            },
            "projectId":{
              "index": false,
              "type":"keyword"
            },
            "embargoed":{
              "index": false,
              "type":"boolean",
              "copy_to": "embargoed"
            },
            "activityOwnerName":{
              "type":"text",
              "copy_to": "activityOwnerNameFacet"
            },
            "lastUpdated":{
              "type":"keyword"
            },
            "lastUpdatedYear":{
              "type":"text",
              "index": false,
              "copy_to": "activityLastUpdatedYearFacet"
            },
            "lastUpdatedMonth":{
              "type":"text",
              "index": false,
              "copy_to": "activityLastUpdatedMonthFacet"
            },
            "surveyImage": {
              "copy_to": "surveyImage",
              "index": false,
              "type": "boolean"
            },
            "records":{
              "properties":{
                "name":{
                  "type":"text",
                  "copy_to": "recordNameFacet"
                },
                "eventTime":{
                  "type": "text"
                }
              }
            },
            "methodType":{
              "index": false,
              "copy_to": "methodType",
              "type":"keyword"
            },
            "spatialAccuracy":{
              "index": false,
              "copy_to": "spatialAccuracy",
              "type":"keyword"
            },
            "speciesIdentification":{
              "index": false,
              "copy_to": "speciesIdentification",
              "type":"keyword"
            },
            "temporalAccuracy":{
              "index": false,
              "copy_to": "temporalAccuracy",
              "type":"keyword"
            },
            "nonTaxonomicAccuracy":{
              "index": false,
              "copy_to": "nonTaxonomicAccuracy",
              "type":"keyword"
            },
            "dataQualityAssuranceMethods":{
              "index": false,
              "copy_to": "dataQualityAssuranceMethods",
              "type":"keyword"
            },
            "isDataManagementPolicyDocumented":{
              "index": false,
              "copy_to": "isDataManagementPolicyDocumented",
              "type":"boolean"
            }
          }
        },
        "siteProjectNameFacet":{"type":"keyword"},
        "siteSurveyNameFacet":{"type":"keyword"},
        "projectList":{
          "properties": {
            "projectName": {
              "type": "text",
              "copy_to": "siteProjectNameFacet"
            }
          }
        },
        "surveyList":{
          "properties": {
            "surveyName": {
              "type": "text",
              "copy_to": "siteSurveyNameFacet"
            }
          }
        },
        "photoType":{
          "type": "text"
        },
        "activities":{
          "properties":{
            "mainTheme": {
              "type":"text",
              "copy_to": "mainThemeFacet"
            }
          }
        },
        "mainTheme": {
          "type":"text",
          "copy_to":"mainThemeFacet"
        },
        "mainThemeFacet":{
          "type":"keyword"
        },
        "publicationStatus":{
          "type":"keyword"
        },
        "meriPlanAssetFacet": {
          "type": "keyword"
        },
        "partnerOrganisationTypeFacet": {
          "type":"keyword"
        },
        "custom": {
          "properties": {
            "details": {
              "properties": {
                "objectives": {
                  "properties": {
                    "rows1": {
                      "properties": {
                        "assets": {
                          "type":"keyword",
                          "copy_to":"meriPlanAssetFacet"
                        }
                      }
                    }
                  }
                },
                "partnership": {
                  "properties": {
                    "rows": {
                      "properties": {
                        "data3": {
                          "type":"text",
                          "copy_to": "partnerOrganisationTypeFacet"
                        }
                      }
                    }
                  }
                },
                "budget": {
                  "properties": {
                    "rows": {
                      "properties": {
                        "shortLabel": {
                          "type":"keyword"
                        }
                      }
                    }
                  }
                },
                "caseStudy": {
                  "type": "keyword"
                },
                "events": {
                  "properties": {
                    "scheduledDate": {
                      "type": "date",
                      "ignore_malformed": true
                    }
                  }

                }
              }
            }
          }
        },
        "surveyMonthFacet":{"type":"keyword"},
        "surveyMonth":{
          "type":"text",
          "copy_to": "surveyMonthFacet"
        },
        "surveyYearFacet":{"type":"keyword"},
        "surveyYear":{
          "type":"text",
          "copy_to": "surveyYearFacet"
        },
        "userId": {
          "type": "keyword"
        },
        "blog": {
          "properties": {
            "content": {
              "type": "text"
            },
            "title": {
              "type": "text"
            },
            "blogEntryId": {
              "index": false,
              "type": "keyword"
            },
            "date": {
              "type": "date",
              "index": false,
              "ignore_malformed": true
            },
            "imageId": {
              "type": "keyword",
              "index": false
            },
            "imageThumbnailUrl": {
              "type": "keyword",
              "index": false
            },
            "keepOnTop": {
              "type": "boolean",
              "index": false
            },
            "projectId": {
              "type": "keyword",
              "index": false
            },
            "type": {
              "type": "keyword",
              "index": false
            },
            "stockIcon": {
              "type": "keyword",
              "index": false
            },
            "viewMoreUrl": {
              "type": "keyword",
              "index": false
            }
          }
        }
      },
      "dynamic_templates": [
        {
          "output_template": {
            "path_match": "outputTargets.*",
            "mapping": {
              "type": "text"
            }
          }
        },
        {
          "custom_dollars_template": {
            "path_match":"custom.details.budget.rows.costs.dollar",
            "mapping": {
              "type":"keyword"
            }
          }
        },
        {
          "custom_event_date_template": {
            "path_match":"custom.details.events.scheduledDate",
            "mapping": {
              "type":"keyword"
            }
          }
        },
        {
          "due_date_template": {
            "path_match":"custom.details.budget.rows.dueDate",
            "mapping": {
              "type":"keyword"
            }
          }
        },
        {
          "plan_date_template": {
            "path_match":"custom.details.*",
            "match_mapping_type":"date",
            "mapping": {
              "type":"keyword"
            }
          }
        },
        {
          "pid_template": {
            "path_match":"*.pid",
            "mapping": {
              "type":"keyword"
            }
          }
        },
        {
          "blog_date_template": {
            "path_match":"blog.date",
            "mapping": {
              "type":"keyword"
            }
          }
        }
      ]

  },
  "settings":{
    "index.mapping.total_fields.limit": 2000,
    "index.max_result_window": 30000,
    "analysis":{
      "analyzer":{
        "facetKeyword":{
          "filter":[
            "trim"
          ],
          "type":"custom",
          "tokenizer":"keyword"
        },
        "case_insensitive_sort": {
          "tokenizer": "keyword",
          "filter":  [ "lowercase" ]
        }
      },
      "normalizer": {
        "case_insensitive_sort": {
          "filter": "lowercase"
        }
      }
    }
  }
}
