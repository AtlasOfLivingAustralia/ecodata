{
  "mappings":{

      "properties": {
        "siteId" : {
          "type" : "keyword"
        },
        "projectId" : {
          "type" : "keyword"
        },
        "projects" : {
          "type" : "keyword"
        },
        "programId" : {
          "type" : "keyword"
        },
        "managementUnitId" : {
          "type" : "keyword"
        },
        "grantId": {
          "type": "keyword"
        },
        "origin" : {
          "type" : "keyword"
        },
        "countries" : {
          "type" : "keyword"
        },
        "uNRegions" : {
          "type" : "keyword"
        },
        "scienceType" : {
          "type" : "keyword"
        },
        "ecoScienceType" : {
          "type" : "keyword"
        },
        "typeOfProject" : {
          "type" : "keyword"
        },
        "tags" : {
          "type" : "keyword"
        },
        "fundings": {
          "properties": {
            "fundingSource": {
              "type": "keyword",
              "fields": {
                "fundingSourceFacet": {
                  "type": "keyword"
                }
              }
            }
          }
        },

        "status": {
          "type" : "keyword"
        },
        "organisationName": {
          "type" : "text",
          "copy_to": ["organisationFacet", "organisationSort"]
        },
        "organisationFacet": {
          "type": "keyword"
        },
        "organisationSort": {
          "type": "keyword",
          "normalizer" : "case_insensitive_sort"
        },
        "dateCreated": {
          "type" : "date",
          "copy_to" : "dateCreatedSort"
        },
        "dateCreatedSort" : {
          "type" : "keyword", "normalizer" : "case_insensitive_sort"
        },
        "serviceProviderName": {
          "type" : "text",
          "copy_to": ["organisationName","organisationFacet", "organisationSort"]
        },
        "associatedOrgs": {
          "properties" : {
            "name" : {
              "type" : "text",
              "copy_to": ["organisationName", "organisationFacet", "organisationSort"]
            },
            "logo": {
              "index": false,
              "type": "text"
            }
          }
        },
        "type": {
          "type" : "text",
          "fields" : {
            "typeFacet" : {"type" : "keyword"}
          }
        },
        "className": {
          "type":"text",
          "analyzer":"facetKeyword"
        },
        "associatedProgram": {
          "type" : "text",
          "copy_to": "associatedProgramFacet"
        },
        "associatedProgramFacet": {
          "type": "keyword"
        },

        "managementUnitName": {
          "type" : "text",
          "copy_to" : "muFacet"
        },
        "muFacet": {
          "type": "keyword"
        },
        "primaryOutcome": {
          "type": "text",
          "fields": {
            "primaryOutcomeFacet": {"type": "keyword"}
          }
        },
        "secondaryOutcomes": {
          "type": "text",
          "fields": {
            "secondaryOutcomesFacet": {"type": "keyword"}
          }
        },
        "associatedSubProgram": {
          "type" : "text",
          "copy_to" : "associatedSubProgramFacet"
        },
        "associatedSubProgramFacet" : {
          "type" : "keyword"
        },
        "industries":{
          "type":"text",
          "copy_to":"industryFacet"
        },
        "industryFacet":{
          "type":"keyword"
        },
        "bushfireCategories":{
          "type":"text",
          "copy_to":"bushfireCategoriesFacet"
        },
        "bushfireCategoriesFacet":{
          "type":"keyword"
        },
        "name": {
          "type" : "text",
          "copy_to": "nameSort"
        },
        "nameSort": {
          "type" : "keyword", "normalizer" : "lowercase"
        },
        "extent":{
          "properties": {
            "geometry": {
              "properties": {


              }
            }
          }
        },
        "sites":{
          "properties":{
            "extent":{
              "properties": {
                "geometry": {
                  "properties": {

                  }
                }
              }
            },
            "geoIndex": {
              "type": "geo_shape",
              "ignore_malformed": true
            },
            "geoPoint": {
              "type": "geo_point"
            },
            "geometryType": {
              "type": "keyword"
            },
            "name": {
              "type" : "text",
              "fields" : {
                "siteNameFacet" : {"type" : "keyword"}
              }
            }
          }
        },
        "projectArea":{
          "properties":{
            "geoIndex": {
              "type": "geo_shape",
              "ignore_malformed": true
            },
            "geoPoint": {
              "type": "geo_point"
            },
            "geometryType": {
              "type": "keyword"
            }
          }
        },
        "isBushfire":{
          "type":"boolean"
        },
        "difficulty":{
          "type":"keyword"
        },
        "fundingSourceFacet":{
          "type":"keyword"
        },
        "reportingThemesFacet":{
          "type":"keyword"
        },
        "assessment":{
          "type":"keyword"
        },
        "isExternal":{
          "type":"boolean"
        },
        "externalId": {
          "type":"keyword"
        },
        "promoteOnHomepage": {
          "type": "keyword"
        },

        "projectActivity":{
          "properties":{
            "embargoUntil":{
              "type":"text"
            },
            "name":{
              "type":"text",
              "fields": {
                "projectActivityNameFacet":{"type":"keyword"}
              }
            },
            "organisationName":{
              "type":"text",
              "fields": {
                "organisationNameFacet":{"type":"keyword"}
              }
            },
            "projectName":{
              "type":"text",
              "fields": {
                "projectNameFacet":{"type":"keyword"}
              }
            },
            "projectId":{
              "type":"keyword"
            },
            "embargoed":{
              "type":"boolean"
            },
            "activityOwnerName":{
              "type":"text",
              "fields": {
                "activityOwnerNameFacet":{"type":"keyword"}
              }
            },
            "lastUpdated":{
              "type":"keyword"
            },
            "lastUpdatedYear":{
              "type":"text",
              "fields": {
                "activityLastUpdatedYearFacet":{"type":"keyword"}
              }
            },
            "lastUpdatedMonth":{
              "type":"text",
              "fields": {
                "activityLastUpdatedMonthFacet":{"type":"keyword"}
              }
            },
            "surveyImage": {
              "type": "boolean"
            },
            "records":{
              "properties":{
                "name":{
                  "type":"text",
                  "fields": {
                    "recordNameFacet":{"type":"keyword"}
                  }
                },
                "eventTime":{
                  "type": "text"
                }
              }
            },
            "methodType":{
              "type":"keyword"
            },
            "spatialAccuracy":{
              "type":"keyword"
            },
            "speciesIdentification":{
              "type":"keyword"
            },
            "temporalAccuracy":{
              "type":"keyword"
            },
            "nonTaxonomicAccuracy":{
              "type":"keyword"
            },
            "dataQualityAssuranceMethods":{
              "type":"keyword"
            },
            "isDataManagementPolicyDocumented":{
              "type":"boolean"
            }
          }
        },
        "projectList":{
          "properties": {
            "projectName": {
              "type": "text",
              "fields": {
                "siteProjectNameFacet":{"type":"keyword"}
              }
            }
          }
        },
        "surveyList":{
          "properties": {
            "surveyName": {
              "type": "text",
              "fields": {
                "siteSurveyNameFacet":{"type":"keyword"}
              }
            }
          }
        },
        "photoType":{
          "type": "text"
        },
        "activities":{
          "properties":{
            "mainTheme": {
              "type":"text",
              "copy_to": "mainThemeFacet"
            }
          }
        },
        "mainTheme": {
          "type":"text",
          "copy_to":"mainThemeFacet"
        },
        "mainThemeFacet":{
          "type":"keyword"
        },
        "publicationStatus":{
          "type":"keyword"
        },
        "meriPlanAssetFacet": {
          "type": "keyword"
        },
        "custom": {
          "properties": {
            "details": {
              "properties": {
                "objectives": {
                  "properties": {
                    "rows1": {
                      "properties": {
                        "assets": {
                          "type":"keyword",
                          "copy_to":"meriPlanAssetFacet"
                        }
                      }
                    }
                  }
                },
                "partnership": {
                  "properties": {
                    "rows": {
                      "properties": {
                        "data3": {
                          "type":"text",
                          "fields": {
                            "partnerOrganisationTypeFacet": {
                              "type":"text"
                            }
                          }
                        }
                      }
                    }
                  }
                },
                "budget": {
                  "properties": {
                    "rows": {
                      "properties": {
                        "shortLabel": {
                          "type":"keyword"
                        }
                      }
                    }
                  }
                },
                "caseStudy": {
                  "type": "keyword"
                },
                "events": {
                  "properties": {
                    "scheduledDate": {
                      "type": "date",
                      "ignore_malformed": true
                    }
                  }

                }
              }
            }
          }
        },
        "surveyMonth":{
          "type":"text",
          "fields": {
            "surveyMonthFacet":{"type":"keyword"}
          }
        },
        "surveyYear":{
          "type":"text",
          "fields": {
            "surveyYearFacet":{"type":"keyword"}
          }
        }
      },
      "dynamic_templates": [
        {
          "output_template": {
            "path_match": "outputTargets.*",
            "mapping": {
              "type": "text"
            }
          }
        },
        {
          "custom_dollars_template": {
            "path_match":"custom.details.budget.rows.costs.dollar",
            "mapping": {
              "type":"keyword"
            }
          }
        },
        {
          "custom_event_date_template": {
            "path_match":"custom.details.events.scheduledDate",
            "mapping": {
              "type":"keyword"
            }
          }
        },
        {
          "due_date_template": {
            "path_match":"custom.details.budget.rows.dueDate",
            "mapping": {
              "type":"keyword"
            }
          }
        },
        {
          "plan_date_template": {
            "path_match":"custom.details.*",
            "match_mapping_type":"date",
            "mapping": {
              "type":"keyword"
            }
          }
        },
        {
          "pid_template": {
            "path_match":"*.pid",
            "mapping": {
              "type":"keyword"
            }
          }
        },
        {
          "blog_date_template": {
            "path_match":"blog.date",
            "mapping": {
              "type":"keyword"
            }
          }
        }
      ]

  },
  "settings":{
    "index.mapping.total_fields.limit": 2000,
    "index.max_result_window": 30000,
    "analysis":{
      "analyzer":{
        "facetKeyword":{
          "filter":[
            "trim"
          ],
          "type":"custom",
          "tokenizer":"keyword"
        },
        "case_insensitive_sort": {
          "tokenizer": "keyword",
          "filter":  [ "lowercase" ]
        }
      },
      "normalizer": {
        "case_insensitive_sort": {
          "filter": "lowercase"
        }
      }
    }
  }
}
