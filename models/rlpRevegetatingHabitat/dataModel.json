{
  "title": "Revegetating habitat",
  "modelName": "RLP - Revegetating habitat",
  "dataModel": [
    {
      "dataType": "list",
      "name": "revegetationArea",
      "columns": [
        {
          "name": "initialOrMaintenance",
          "dataType": "text",
          "validate": "required",
          "constraints": [
            "Initial",
            "Maintenance"
          ]
        },
        {
          "name": "areaRequired",
          "dataType": "text",
          "validate": "required",
          "constraints": [
            "Yes",
            "No"
          ]
        },
        {
          "dataType": "feature",
          "name": "sitesRevegetated",
          "validate": "required"
        },
        {
          "dataType": "number",
          "name": "areaRevegetatedHa",
          "validate": "required",
          "computed": {
            "expression": "$geom.areaHa(sitesRevegetated)",
            "dependents": {
              "source": [
                "sitesRevegetated"
              ]
            }
          }
        },
        {
          "dataType": "number",
          "name": "lengthRevegetatedKm",
          "validate": "required",
          "computed": {
            "expression": "$geom.lengthKm(sitesRevegetated)",
            "dependents": {
              "source": [
                "sitesRevegetated"
              ]
            }
          }
        },
        {
          "dataType": "feature",
          "name": "offSiteBenefitSites"
        },
        {
          "dataType": "number",
          "name": "offSiteBenefitAreaHa",
          "computed": {
            "expression": "$geom.areaHa(offSiteBenefitSites)",
            "dependents": {
              "source": [
                "offSiteBenefitSites"
              ]
            }
          }
        },
        {
          "dataType": "text",
          "name": "evidenceOfBenefit",
          "validate": "maxSize[300]"
        },
        {
          "dataType": "list",
          "name": "revegetationDetails",
          "columns": [
            {
              "dataType": "species",
              "description": "",
              "name": "species",
              "dwcAttribute": "scientificName",
              "validate": "required"
            },
            {
              "dataType": "text",
              "name": "typeOfRevegetationActivity",
              "validate": "required,maxSize[100]"
            },
            {
              "dataType": "number",
              "name": "numberOfDaysCollectingSeed",
              "validate": "required,min[0]",
              "description": "Number of days should be calculated as number of days by number of people (eg. 4.5 days by 3 people is 13.5 days)"
            },
            {
              "dataType": "number",
              "name": "numberOfDaysPropagatingPlants",
              "validate": "required,min[0]",
              "description": "Number of days should be calculated as number of days by number of people (eg. 4.5 days by 3 people is 13.5 days)"
            },
            {
              "dataType": "text",
              "name": "revegetationMethod",
              "dwcAttribute": "establishmentMeans",
              "description": "If 'Other', please identify in 'Type of revegetation activity' field",
              "constraints": [
                "Direct seeding",
                "Tubestock planting",
                "Both",
                "Other"
              ],
              "validate": "required"
            },
            {
              "dataType": "text",
              "name": "threatenedEcologicalCommunity",
              "validate": "maxSize[100]",
              "description": "This free text field allows multiple TECs to be entered. They should be written as listed in EPBC, and separated by ';'"
            },
            {
              "dataType": "text",
              "name": "individualsOrKilogramsOfSeed",
              "validate": "required",
              "constraints": [
                "Individuals",
                "Kilograms of seed"
              ]
            },
            {
              "name": "numberPlanted",
              "dataType": "number",
              "validate": "required,min[0]"
            },
            {
              "name": "revegetationObjective",
              "dataType": "text",
              "validate": "required,maxSize[300]"
            }
          ]
        }
      ]
    }
  ],
  "viewModel": [
    {
      "items": [
        {
          "type": "repeat",
          "source": "revegetationArea",
          "userAddedRows": true,
          "addRowText": "New area of revegetation",
          "items": [
            {
              "type": "row",
              "items": [
                {
                  "preLabel": "Initial or maintenance activity?",
                  "source": "initialOrMaintenance",
                  "type": "selectOne",
                  "css": "span3"
                },
                {
                  "preLabel": "Will this report invoice for area revegetated?",
                  "source": "areaRequired",
                  "type": "selectOne",
                  "css": "span4"
                }
              ]
            },
            {
              "type": "row",
              "items": [
                {
                  "type": "feature",
                  "source": "sitesRevegetated",
                  "preLabel": "Site/s being revegetated",
                  "css": "span3"
                },
                {
                  "type": "number",
                  "source": "areaRevegetatedHa",
                  "preLabel": "Area (ha) of habitat revegetated",
                  "css": "span3",
                  "readonly": "readonly"
                },
                {
                  "type": "number",
                  "source": "lengthRevegetatedKm",
                  "preLabel": "Length (km) of habitat revegetated",
                  "css": "span3",
                  "readonly": "readonly"
                }
              ]
            },
            {
              "type": "row",
              "items": [
                {
                  "preLabel": "Please map any off-site area/s if they benefitted from this  revegetation activity",
                  "source": "offSiteBenefitSites",
                  "type": "feature",
                  "css": "span3"
                },
                {
                  "preLabel": "Area (ha) benefitting from revegetation activity",
                  "source": "offSiteBenefitAreaHa",
                  "type": "number",
                  "css": "span2",
                  "readonly": "readonly"
                },
                {
                  "preLabel": "If off-site area was mapped please provide a description on the evidence available to reflect this benefit.",
                  "source": "evidenceOfBenefit",
                  "type": "textarea",
                  "css": "span6"
                }
              ]
            },
            {
              "source": "revegetationDetails",
              "columns": [
                {
                  "title": "Species",
                  "source": "species",
                  "type": "speciesSelect",
                  "width": "20%"
                },
                {
                  "title": "Number of days collecting seed",
                  "source": "numberOfDaysCollectingSeed",
                  "width": "5%",
                  "type": "number"
                },
                {
                  "title": "Number of days propagating plants",
                  "source": "numberOfDaysPropagatingPlants",
                  "width": "5%",
                  "type": "number"
                },
                {
                  "title": "Planting method",
                  "source": "revegetationMethod",
                  "type": "selectOne",
                  "width": "15%"
                },
                {
                  "title": "Type of revegetation activity",
                  "type": "text",
                  "width": "15%",
                  "source": "typeOfRevegetationActivity"
                },
                {
                  "title": "Threatened ecological community (if applicable)",
                  "source": "threatenedEcologicalCommunity",
                  "type": "text",
                  "width": "15%"
                },
                {
                  "title": "Individuals / kilograms",
                  "source": "individualsOrKilogramsOfSeed",
                  "type": "selectOne",
                  "width": "10%"
                },
                {
                  "title": "Number planted",
                  "source": "numberPlanted",
                  "type": "number",
                  "width": "10%"
                },
                {
                  "title": "Objective of revegetation activity",
                  "source": "revegetationObjective",
                  "type": "textarea",
                  "width": "20%"
                }
              ],
              "userAddedRows": true,
              "type": "table",
              "addRowText":"Add a species"
            }
          ]
        }
      ],
      "type": "section"
    }
  ]
}