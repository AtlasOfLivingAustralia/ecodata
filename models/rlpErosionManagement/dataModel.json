{
  "title": "Erosion management",
  "modelName": "RLP - Erosion Management",
  "dataModel": [
    {
      "dataType":"list",
      "name":"erosionManagementDetails",
      "minSize":0,
      "columns":[
        {
          "dataType":"text",
          "name":"initialOrFollowup",
          "validate":"required",
          "constraints":[
            "Initial",
            "Followup"
          ]
        },
        {
          "dataType": "feature",
          "name": "sitesManaged",
          "validate": "required"
        },
        {
          "dataType": "number",
          "name": "areaOfErosionControlHa",
          "validate": "required",
          "computed": {
            "expression": "$geom.areaHa(sitesManaged)",
            "dependents": {
              "source": [
                "sitesManaged"
              ]
            }
          }
        },
        {
          "dataType": "number",
          "name": "lengthOfErosionControlKm",
          "validate": "required",
          "computed": {
            "expression": "$geom.lengthKm(sitesManaged)",
            "dependents": {
              "source": [
                "sitesManaged"
              ]
            }
          }
        },

        {
          "dataType":"text",
          "name":"erosionManagementMethod",
          "validate":"required",
          "constraints":[
            "Erosion control structures",
            "Farming practice change - improved crop management (contour plowing / bunding)",
            "Farming practice change - improved crop management (cover crops & mulching)",
            "Farming practice change - improved stock management (grazing regime)",
            "Farming practice change - improved crop management (perennial crops)",
            "Farming practice change - improved crop management (rotation)",
            "Farming practice change - improved stock management (stock movement)",
            "Farming practice change - improved stock management (stock watering)",
            "Farming practice change - improved crop management (tillage systems)",
            "Farming practice change - reduced stocking",
            "Farming practice change - riparian buffer strips",
            "Farming practice change - stock exclusion",
            "Farming practice change - strip farming",
            "Other"
          ]

        },
        {
          "dataType":"text",
          "name":"otherErosionManagementMethod",
          "validate":"required",
          "behaviour":[
            {
              "condition": "erosionManagementMethod == \"Other\"",
              "type": "enable"
            }
          ]
        },
        {
          "dataType":"number",
          "name":"areaBenefitingHa",
          "validate":"required,min[0]"
        },
        {
          "dataType":"number",
          "name":"numberInstalled",
          "validate":"required,min[0]"
        }

      ]
    },
    {
      "dataType":"list",
      "name":"erosionStructuresInstalled",
      "columns":[
        {
          "dataType":"text",
          "name":"erosionStructureType",
          "validate":"required",
          "constraints":[
            "Channel / bank lining - cellular confinement systems",
            "Channel / bank lining - solid barrier",
            "Dams & spillways (flood mitigation)",
            "Drift fence",
            "Flumes & Chutes",
            "Gabions",
            "Reventment structures (bank protection)",
            "Sea wall",
            "Sediment traps & groynes",
            "Slope reduction - flow interception structures (eg. contour banks & swales)",
            "Slope reduction - Weirs & connected weir pools",
            "Stilling ponds & retention basins",
            "Other"
          ]
        }
      ],
      "minSize":0
    }
  ],
  "viewModel": [

    {
      "items": [
        {
          "columns": [
            {
              "title":"Site/s where erosion management was undertaken",
              "source":"sitesManaged",
              "type":"feature",
              "width":"10%"
            },
            {
              "title":"Area (ha) of erosion control",
              "source":"areaOfErosionControlHa",
              "type":"number",
              "readonly":"readonly",
              "width":"10%"
            },
            {
              "title":"Length (km) of erosion control",
              "source":"lengthOfErosionControlKm",
              "type":"number",
              "readonly":"readonly",
              "width":"10%"
            },
            {
              "source": "erosionManagementMethod",
              "title": "Type of treatment method",
              "type": "select2",
              "width":"25%"
            },
            {
              "title": "Type of treatment method (if Other)",
              "source": "otherErosionManagementMethod",
              "type": "text",
              "width":"25%"
            },
            {
              "title": "Area (ha) benefiting from erosion management",
              "source": "areaBenefitingHa",
              "type": "number",
              "width":"10%"

            },
            {
              "title":"Number of erosion control structures installed",
              "source":"numberInstalled",
              "type":"number",
              "width":"10%"


            }
          ],
          "source":"erosionManagementDetails",
          "userAddedRows":true,
          "type": "table"
        }
      ],
      "type": "section"
    }
  ]
}