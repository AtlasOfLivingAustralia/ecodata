{
  "title": "Establishing and maintaining breeding programs",
  "modelName": "RLP - Establishing ex-situ breeding programs",
  "dataModel": [
    {
      "dataType": "list",
      "name": "breedingProgramDetails",
      "columns": [
        {
          "dataType":"text",
          "name":"inSituExSitu",
          "validate":"required",
          "constraints":[
            "Ex-situ",
            "In-situ"
          ]
        },
        {
          "dataType":"text",
          "name":"newOrMaintained",
          "validate": "required",
          "constraints": [
            "Newly established",
            "Maintained"
          ]
        },
        {
          "dataType":"number",
          "name":"numberOfSitesCreated",
          "validate":"required,min[1]"
        },
        {
          "dataType":"number",
          "name":"numberOfDaysMaintainingBreedingPrograms",
          "validate":"required,min[0]",
          "description":"Number of days should be calculated as number of days by number of people (eg. 4.5 days by 3 people is 13.5 days)"
        },
        {
          "dataType":"feature",
          "name":"sitesOfBreedingProgram",
          "validate":"required",
          "description":"Number of days should be calculated as number of days by number of people (eg. 4.5 days by 3 people is 13.5 days)"
        },
        {
          "dataType":"number",
          "name":"areaOfEnclosureHa",
          "validate":"required",
          "computed": {
            "expression": "$geom.areaHa(sitesOfBreedingProgram)",
            "dependents": {
              "source": [
                "sitesOfBreedingProgram"
              ]
            }
          }
        },
        {
          "dataType":"list",
          "name":"speciesInBreedingProgram",
          "columns":[
            {
              "dataType": "species",
              "description": "The threatened species targeted by the breeding program",
              "name": "targetSpecies",
              "dwcAttribute": "scientificName",
              "validate": "required"
            },
            {
              "dataType":"text",
              "name":"breedingTechnique",
              "validate":"required",
              "constraints":[
                "Seed bank or captive breeding",
                "Seed orchard",
                "Seed nursery",
                "Propagation",
                "Seed viability testing",
                "Seed genetic testing",
                "Fauna captive breeding program",
                "Fauna wild breeding program",
                "Other"
              ]
            },
            {
              "dataType":"text",
              "name":"otherBreedingTechnique",
              "description":"",
              "validate":"required,maxSize[300]",
              "behaviour":[
                {
                  "condition": "breedingTechnique == \"Other\"",
                  "type": "enable"
                }
              ]

            },
            {
              "dataType":"text",
              "name":"individualsOrGroups",
              "constraints":[
                "Individuals",
                "Groups"
              ],
              "validate":"required"
            },
            {
              "dataType":"number",
              "name":"numberOfIndividualsOrGroups",
              "validate":"required,min[0]"
            },
            {
              "name":"numberOfIndividualsReleased",
              "dataType":"number",
              "validate":"required,min[0]"
            }
          ]
        }

      ]
    },
    {
      "name":"photographicEvidence",
      "dataType":"image"
    }
  ],
  "viewModel": [
    {
      "items": [
        {
          "source": "breedingProgramDetails",
          "items": [
            {
              "type": "row",
              "items":[
                {
                  "type":"selectOne",
                  "source":"inSituExSitu",
                  "preLabel":"Ex-situ / In-situ",
                  "css":"span3"
                },
                {
                  "type":"selectOne",
                  "preLabel":"Is this a newly established or maintained breeding program?",
                  "source":"newOrMaintained",
                  "css":"span3"
                },
                {
                  "type":"number",
                  "preLabel":"Number of breeding sites created",
                  "source":"numberOfSitesCreated",
                  "css":"span3"
                }
              ]
            },
            {
              "type":"row",
              "items":[

                {
                  "type":"number",
                  "css":"span3",
                  "source":"numberOfDaysMaintainingBreedingPrograms",
                  "preLabel":"Number of days maintaining breeding program"
                },
                {
                  "type":"feature",
                  "css":"span3",
                  "source":"sitesOfBreedingProgram",
                  "preLabel":"Site/s of breeding program"
                },
                {
                  "type":"number",
                  "readonly":"readonly",
                  "css":"span3",
                  "preLabel":"Area (ha) of feral-free enclosures established or maintained",
                  "source":"areaOfEnclosureHa"
                }
              ]
            },
            {
              "type":"table",
              "userAddedRows":true,
              "addRowText":"Add a species",
              "source":"speciesInBreedingProgram",
              "columns":[
                {
                  "title": "Targeted threatened species",
                  "source": "targetSpecies",
                  "type": "speciesSelect",
                  "width":"30%"
                },
                {
                  "type":"select2",
                  "source":"breedingTechnique",
                  "title":"Technique of breeding program",
                  "width":"15%"
                },
                {
                  "type":"text",
                  "source":"otherBreedingTechnique",
                  "title":"Technique of breeding program (if Other)",
                  "width":"20%"
                },
                {
                  "type":"selectOne",
                  "source":"individualsOrGroups",
                  "title":"Individuals or groups?",
                  "width":"15%"
                },
                {
                  "title":"Number of groups / individuals in breeding program",
                  "source":"numberOfIndividualsOrGroups",
                  "type":"number",
                  "width":"10%"
                },
                {
                  "title":"Number of individuals released or established in the wild",
                  "source":"numberOfIndividualsReleased",
                  "type":"number",
                  "width":"10%"
                }

              ]
            }

          ],
          "userAddedRows": true,
          "type": "repeat",
          "addRowText":"Add a new breeding area"
        },
        {
          "type":"row",
          "items":[
            {
              "type":"image",
              "source":"photographicEvidence",
              "preLabel":"Optionally attach photos"
            }
          ]
        }
      ],
      "type": "section"
    }
  ]
}