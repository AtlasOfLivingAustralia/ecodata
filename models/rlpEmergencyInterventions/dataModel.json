{
  "title": "Undertaking emergency interventions to prevent extinctions",
  "modelName": "RLP - Emergency Interventions",
  "dataModel": [
    {
      "dataType": "list",
      "name": "interventionDetails",
      "columns": [
        {
          "name":"initialOrFollowup",
          "dataType":"text",
          "validate":"required",
          "constraints":[
            "Initial",
            "Follow-up"
          ]
        },
        {
          "name":"numberOfInterventions",
          "dataType":"number",
          "validate":"required,min[0]"
        },
        {
          "name":"siteOfIntervention",
          "dataType":"feature",
          "validate":"required"
        },
        {
          "name":"areaOfInterventionHa",
          "dataType":"number",
          "validate":"required,min[0]",
          "computed": {
            "expression": "$geom.areaHa(siteOfIntervention)",
            "dependents": {
              "source": [
                "siteOfIntervention"
              ]
            }
          }
        },
        {
          "name":"lengthOfInterventionKm",
          "dataType":"number",
          "validate":"required,min[0]",
          "computed": {
            "expression": "$geom.lengthKm(siteOfIntervention)",
            "dependents": {
              "source": [
                "siteOfIntervention"
              ]
            }
          }
        },
        {
          "name":"purposeOfIntervention",
          "dataType":"text",
          "validate":"required",
          "description":"This field may be used to list What type of intervention is required. A list of multiple interventions need to be separated with a ';'."
        },
        {
          "dataType":"list",
          "name":"interventionSpecies",
          "columns":[

            {
              "name": "species",
              "dataType": "species",
              "validate": "required"
            },

            {
              "name":"numberOfIndividualsInvolved",
              "dataType":"number",
              "validate":"required,min[0]"
            },
            {
              "name":"numberOfDaysPerformingInterventions",
              "dataType":"number",
              "validate":"required,min[0]",
              "description":"Number of days should be calculated as number of days by number of people (eg. 4.5 days by 3 people is 13.5 days)"
            },
            {
              "name":"relocationSite",
              "dataType":"feature",
              "description":"If translocation is required please map site"
            },
            {
              "name":"areaOfRelocationSiteHa",
              "dataType":"number",
              "validate":"min[0]",
              "computed": {
                "expression": "$geom.areaHa(relocationSite)",
                "dependents": {
                  "source": [
                    "relocationSite"
                  ]
                }
              }
            },
            {
              "dataType":"text",
              "name":"comment",
              "validate":"maxSize[300]"
            }
          ]
        }


      ]
    }
  ],
  "viewModel": [
    {
      "items": [
        {
          "source": "interventionDetails",
          "items": [
            {
              "type":"row",
              "items":[
                {
                  "preLabel":"Initial or follow-up activity?",
                  "source":"initialOrFollowup",
                  "type":"selectOne",
                  "css":"span3"
                },
                {
                  "type":"number",
                  "source":"numberOfInterventions",
                  "css":"span2",
                  "preLabel":"Number of interventions"
                }
              ]
            },
            {
              "type": "row",
              "items": [
                {
                  "type": "feature",
                  "source": "siteOfIntervention",
                  "preLabel": "Site/s where emergency interventions were undertaken",
                  "css": "span3"
                },
                {
                  "type": "number",
                  "source": "areaOfInterventionHa",
                  "preLabel": "Area (ha) where emergency interventions were undertaken",
                  "css": "span2",
                  "readonly": "readonly"
                },
                {
                  "preLabel":"Type and goal or intervention",
                  "source":"purposeOfIntervention",
                  "css":"span5",
                  "type":"textarea",
                  "rows":3
                }

              ]
            },

            {
              "type":"table",
              "source":"interventionSpecies",
              "userAddedRows":true,
              "columns":[
                {
                  "title": "Targeted species",
                  "source": "species",
                  "type": "speciesSelect",
                  "width": "30%"
                },
                {
                  "type":"number",
                  "source":"numberOfIndividualsInvolved",
                  "width":"10%",
                  "title":"Number of individuals involved"
                },
                {
                  "type":"number",
                  "source":"numberOfDaysPerformingInterventions",
                  "width":"10%",
                  "title":"Time (days) of intervention"
                },

                {
                  "type": "feature",
                  "source": "relocationSite",
                  "title": "Site/s where emergency interventions were relocated to",
                  "width": "10%"
                },
                {
                  "type": "number",
                  "source": "areaOfRelocationSiteHa",
                  "title": "Area (ha) where emergency interventions were relocated to",
                  "width": "10%",
                  "readonly": "readonly"
                },
                {
                  "type":"textarea",
                  "source":"comment",
                  "title":"Comments",
                  "rows":3,
                  "width":"30%"
                }

              ]
            }


          ],
          "userAddedRows": true,
          "type": "repeat",
          "addRowText":"Add intervention site"
        }
      ],
      "type": "section"
    }
  ]
}