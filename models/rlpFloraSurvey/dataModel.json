{
  "title": "Flora survey",
  "modelName": "RLP - Flora survey",
  "dataModel": [
    {
      "dataType": "list",
      "name": "floraSurveys",
      "minSize": 1,
      "columns": [
        {
          "dataType": "text",
          "description": "",
          "name": "baselineOrIndicatorSurvey",
          "constraints": [
            "Baseline",
            "Indicator"
          ],
          "validate": "required"
        },
        {
          "dataType":"number",
          "name":"numberOfFloraSurveys",
          "validate":"required,min[0]"
        },
        {
          "name":"dateRange",
          "dataType":"text",
          "validate":"required,maxSize[300]"
        },
        {
          "name":"sitesSurveyed",
          "dataType":"feature",
          "validate":"required"
        },
        {
          "name":"areaSurveyedHa",
          "dataType":"number",
          "validate":"required,min[1]",
          "computed": {
            "expression": "$geom.areaHa(sitesSurveyed)",
            "dependents": {
              "source": [
                "sitesSurveyed"
              ]
            }
          }
        },
        {
          "dataType":"list",
          "name":"floraSurveyDetails",
          "columns":[
            {
              "dataType": "species",
              "name": "species",
              "validate": "required"
            },
            {
              "dataType": "text",
              "name": "threatenedEcologicalCommunity"
            },
            {
              "name":"surveyTechnique",
              "description":"What/how will the survey capture the flora data",
              "dataType":"text",
              "validate":"required"
            },
            {
              "name":"individualsOrGroups",
              "dataType":"text",
              "constraints":[
                "Individuals",
                "Groups"
              ],
              "validate":"required"
            },
            {
              "name":"numberOfIndividualsOrGroups",
              "dataType":"number",
              "validate":"required,min[0]"
            }
          ]
        }

      ]
    }
  ],
  "viewModel": [
    {
      "items": [
        {
          "items": [
            {
              "type":"row",
              "items":[
                {
                  "preLabel": "Baseline survey or indicator survey?",
                  "source": "baselineOrIndicatorSurvey",
                  "type": "selectOne",
                  "css":"span3"
                },
                {
                  "preLabel":"Number of flora surveys conducted",
                  "source":"numberOfFloraSurveys",
                  "type":"number",
                  "css":"span3"
                },
                {
                  "preLabel":"Date range",
                  "source":"dateRange",
                  "type":"text",
                  "css":"span3"

                }

              ]
            },
            {
              "type":"row",
              "items":[
                {
                  "preLabel":"Site/s covered by flora surveys",
                  "source":"sitesSurveyed",
                  "type":"feature",
                  "css":"span3"
                },
                {
                  "preLabel":"Area (ha) covered by flora surveys",
                  "source":"areaSurveyedHa",
                  "readonly":"readonly",
                  "css":"span3",
                  "type":"number"
                }
              ]
            },
            {
              "type":"table",
              "userAddedRows":true,
              "source":"floraSurveyDetails",
              "columns":[
                {
                  "source": "species",
                  "title": "Target species recorded",
                  "type": "speciesSelect",
                  "width": "30%"
                },
                {
                  "source": "threatenedEcologicalCommunity",
                  "title": "Threatened ecological communities (if applicable)",
                  "type": "text",
                  "width": "25%"
                },
                {
                  "source":"surveyTechnique",
                  "title":"Survey technique",
                  "type":"text",
                  "width":"20%"
                },
                {
                  "source": "individualsOrGroups",
                  "title": "Individuals or groups?",
                  "type": "selectOne",
                  "width": "15%"
                },
                {
                  "source": "numberOfIndividualsOrGroups",
                  "title": "Number of groups / individuals in flora survey",
                  "type": "number",
                  "width": "10%"
                }
              ]
            }


          ],
          "source": "floraSurveys",
          "userAddedRows": true,
          "addRowText":"New survey site",
          "type": "repeat"
        }
      ],
      "type": "section"
    }
  ]
}